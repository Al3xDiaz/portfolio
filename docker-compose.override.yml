version: '3.9'
services:
  app:
    build: 
      context: ./portafolio
      dockerfile: ${DOCKERFILE:-Dockerfile}
    volumes: 
      - ./portafolio/:/app/src/
      - next_build:/app/src/build
    entrypoint: /app/src/entrypoint.sh yarn dev
    restart: unless-stopped
  strapi:
    build: 
      context: ./strapi
      dockerfile: ${DOCKERFILE:-Dockerfile}
    volumes:
      - ./strapi:/opt/app
    entrypoint: /opt/app/entrypoint.sh
    command: yarn develop
volumes:
  next_build: